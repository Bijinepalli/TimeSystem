<p-confirmDialog></p-confirmDialog>
<form [formGroup]="timeSheetForm" (ngSubmit)="onSubmit()" class="">
  <div class="ui-g ui-g-nopad mainHeader">
    <div class="ui-g-9 ui-md-10 ui-g-nopad" style="padding-top: 5px;padding-left:10px">
      Maintain Time Sheet
    </div>
    <div class="ui-g-3 ui-md-2 ui-g-nopad">
      <div class="ui-g-3 ui-md-6"></div>
      <div class="ui-g-3 ui-md-4"></div>
      <div class="ui-g-6 ui-md-2 helpClass ui-g-nopad">
        <a (click)="showHelp('')" style="cursor: help;"><i class="fa fa-question fa-150x" style="padding-top:2px; color:black"></i></a>
      </div>
    </div>
  </div>
  <br>
  <div class="ui-g" *ngIf="this._employee != undefined">
    <div class="ui-g-12 ui-md-12" style="text-align: center">
      <b>EmployeeName:</b>&nbsp;&nbsp;&nbsp;{{this._employee[0].FirstName}}&nbsp;{{this._employee[0].LastName}}
    </div>
  </div>
  <div class="ui-g" *ngIf="this._timeSheetEntries != undefined">
    <div class="ui-g-12 ui-md-4">
      <b>Period Ending:</b>&nbsp;&nbsp;&nbsp;{{this._timeSheetEntries[0].PeriodEnd}}
    </div>
    <div class="ui-g-12 ui-md-4" style="text-align: center">
      <b>Submitted On:</b>&nbsp;&nbsp;&nbsp;{{this._timeSheetEntries[0].SubmitDate}}
    </div>
    <div class="ui-g-12 ui-md-4" style="text-align: right">
      <b>Resubmittal:</b>&nbsp;&nbsp;&nbsp;{{this._timeSheetEntries[0].Redubmitted===true?'Yes':'No'}}
    </div>
  </div>
  <div class="ui-g">
    <div class="ui-g-12 ui-md-12">
      <p-panel class="panelEmpBilling">
        <p-header>
          Time & Materials Billable Hours
        </p-header>
        <!-- For DB Related Values -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3">
            Client
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i= index" readonly="readonly" value="{{ _c | date : 'EEE' }}" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" /><br>
            <input *ngFor="let _c1 of _DateArray;let i=index" readonly="readonly" value="{{ _c1 | date : 'MM-dd' }}"
              class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <b>Total</b>
          </div>
        </div>
        <div class="ui-g" *ngFor="let _entry of _timeTandM;let i = index">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="tandm" formControlName="drpTandM_{{i}}" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" type="text" formControlName="txttimeTandMHours_{{i}}_{{c}}" [style.border]="_errorHourlyTANDMArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'"
              (change)="hoursOnChange()" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtTANDMWeeklyTotals_{{i}}" 
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
            <i class="fa fa-remove fa-150x" pTooltip="Delete Data" style="cursor:pointer;color:red" tooltipPosition="bottom"
              (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <!-- Always Show a New Line -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="tandm" formControlName="drpTandMDefault" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i = index" formControlName="txttimeTandMHoursDefault_{{i}}" type="text" (change)="hoursOnChange()" 
              pInputText pKeyFilter="num" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtTANDMDailyTotalDefault"
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="text-align: right">
            <b>Daily Totals:</b>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" formControlName="txtTANDMDailyTotals_{{c}}" readonly="readonly" [style.border]="_errorDailyTANDMArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'"
              type="text" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtTANDMTotalWeeks"
              class="weekTotals" />
          </div>
        </div>
      </p-panel>
    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-12 ui-md-12">
      <p-panel class="panelEmpBilling">
        <p-header>
          Project Billable Hours
        </p-header>
        <!-- For DB Related Values -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3">
            Project Name
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i= index" readonly="readonly" value="{{ _c | date : 'EEE' }}" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" /><br>
            <input *ngFor="let _c1 of _DateArray;let i=index" readonly="readonly" value="{{ _c1 | date : 'MM-dd' }}"
              class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <b>Total</b>
          </div>
        </div>
        <div class="ui-g" *ngFor="let _entry of _timeProjBill;let i = index">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="projectBillable" formControlName="drpProjBill_{{i}}" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" type="text" formControlName="txtProjBillHours_{{i}}_{{c}}" [style.border]="_errorHourlyProjBillArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'"
              (change)="hoursOnChange()" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtProjBillWeeklyTotals_{{i}}" 
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
            <i class="fa fa-remove fa-150x" pTooltip="Delete Data" style="cursor:pointer;color:red" tooltipPosition="bottom"
              (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <!-- Always Show a New Line -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="projectBillable" formControlName="drpProjBillDefault" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i = index" formControlName="txtProjBillHoursDefault_{{i}}"  type="text" (change)="hoursOnChange()" 
              pInputText pKeyFilter="num" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtProjBillDailyTotalDefault"
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="text-align: right">
            <b>Daily Totals:</b>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" formControlName="txtProjBillDailyTotals_{{c}}" readonly="readonly" [style.border]="_errorDailyProjBillArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'"
              type="text" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtProjBillTotalWeeks"
              class="weekTotals" />
          </div>
        </div>
      </p-panel>
    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-12 ui-md-12">
      <p-panel class="panelEmpBilling">
        <p-header>
          Non Billable Hours
        </p-header>
        <!-- For DB Related Values -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3">
            Category
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i= index" readonly="readonly" value="{{ _c | date : 'EEE' }}" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" /><br>
            <input *ngFor="let _c1 of _DateArray;let i=index" readonly="readonly" value="{{ _c1 | date : 'MM-dd' }}"
              class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <b>Total</b>
          </div>
        </div>
        <div class="ui-g" *ngFor="let _entry of _timeNONbill;let i = index">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="nonBillable" [style]="{'width':'100%'}" formControlName="drpNONBill_{{i}}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" type="text" formControlName="txtNonBillHours_{{i}}_{{c}}" [style.border]="_errorHourlyNonBillArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'"
              (change)="hoursOnChange()" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtNonBillWeeklyTotals_{{i}}"
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
            <i class="fa fa-remove fa-150x" pTooltip="Delete Data" style="cursor:pointer;color:red" tooltipPosition="bottom"
              (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <!-- Always Show a New Line -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="padding:1px;">
            <p-dropdown [options]="nonBillable" formControlName="drpNonBillDefault" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i = index" formControlName="txtNonBillHoursDefault_{{i}}" type="text" (change)="hoursOnChange()" 
              pInputText pKeyFilter="num" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtNonBillDailyTotalDefault"
              class="weekTotals" />
            <i class="fa fa-save fa-150x" pTooltip="Save Data" style="cursor:pointer;color:green;margin-right:5px"
              tooltipPosition="bottom" (click)="editHoliday(rowData)"></i>
          </div>
        </div>
        <!-- End -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="text-align: right">
            <b>Daily Totals:</b>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let c = index" formControlName="txtNonBillDailyTotals_{{c}}" readonly="readonly" [style.border]="_errorDailyNonBillArray.indexOf(c) === 0 ? '1px solid red': '1px solid black'" 
              type="text" pInputText pKeyFilter="num" class="{{ (_weekArray[c] === 6 || _weekArray[c] === 0) ? 'weekEnd' : 'weekDay'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" readonly="readonly" pInputText pKeyFilter="num" formControlName="txtNonBillTotalWeeks"
              class="weekTotals" />
          </div>
        </div>
      </p-panel>
    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-12 ui-md-12">
      <p-panel class="panelEmpBilling">
        <p-header>
          Grand Totals
        </p-header>
        <!-- For DB Related Values -->
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3">

          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i= index" readonly="readonly" value="{{ _c | date : 'EEE' }}" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" /><br>
            <input *ngFor="let _c1 of _DateArray;let i=index" readonly="readonly" value="{{ _c1 | date : 'MM-dd' }}"
              class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEndLabel' : 'weekDayLabel'}}" />
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <b>Total</b>
          </div>
        </div>
        <div class="ui-g">
          <div class="ui-g-12 ui-md-3" style="text-align: right">
            <b>Grand Total:</b>
          </div>
          <div class="ui-g-12 ui-md-8" style="padding:1px;">
            <input *ngFor="let _c of _DateArray;let i = index" readonly="readonly" formControlName="txtDailyGrandTotal_{{i}}" [style.border]="_errorDailyGrandArray.indexOf(i) === 0 ? '1px solid red': '1px solid black'"
              type="text" pInputText pKeyFilter="num" class="{{ (_weekArray[i] === 6 || _weekArray[i] === 0) ? 'weekEnd' : 'weekDay'}}" />
            <!-- <div>
              <span [style.color]="_errorArray.indexOf(0) === 0 ? 'green': 'red'">100</span>
            </div> -->
          </div>
          <div class="ui-g-12 ui-md-1" style="padding:1px">
            <input type="text" pInputText pKeyFilter="num" readonly="readonly" formControlName="txtWeeklyGrandTotal"
              class="weekTotals" />
          </div>
        </div>
        <!-- End -->

      </p-panel>
    </div>
  </div>
  <div class="ui-g">
    <div class="ui-g-12 ui-md-12">
      <p-panel>
        <p-header>
          Comments
        </p-header>
        <textarea class="comments" pInputTextarea formControlName="txtComments"></textarea>
        <p-footer>
          <div class="ui-g">
            <div class="ui-g-12 ui-md-12" style="text-align: right">
              <button type="button" pButton label="Save" (click)="Save()"></button>&nbsp;
              <button type="button" pButton label="Submit" (click)="Submit()"></button>
            </div>
          </div>
        </p-footer>

      </p-panel>
    </div>
  </div>
</form>