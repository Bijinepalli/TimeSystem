<p-confirmDialog></p-confirmDialog>
<p-toast [style]="{marginTop: '80px'}" position="bottom-right" key="saveSuccess" appendTo="body"></p-toast>
<p-toast position="center" key="alert" (onClose)="onReject()" styleClass="alertToast" [modal]="true" [baseZIndex]="5000"
  appendTo="body">
  <ng-template let-message pTemplate="message">
    <div class="ui-g ui-fluid ui-g-nopad">
      <div class="alertHeader">
        <div class="ui-g-12 ui-md-1" align="center">
          <i class="pi pi-exclamation-triangle" style="font-size: 1.9em;margin:2px;"></i>
        </div>
        <div class="ui-g-12 ui-md-10" align="left">
          <h4 style="margin:5px;">{{message.summary}}</h4>
        </div>
      </div>
      <div class="ui-g-12 ui-md-11" align="left" style="padding:0.8em">
        <p-scrollPanel [style]="{width: '100%', height: '100px'}">
          <label [innerHTML]="message.detail | sanitizeHtmlString"></label>
        </p-scrollPanel>
      </div>
    </div>
    <hr>
    <div class="ui-g ui-fluid ui-g-nopad">
      <div class="ui-g-10"></div>
      <div class="ui-g-2" align="right">
        <button type="button" pButton (click)="onReject()" label="OK" class="ui-button-secondary"
          style="border-color: #007ad9; background: #007ad9; color: #ffff;"></button>
      </div>
    </div>
  </ng-template>
</p-toast>

<p-toast position="center" key="exception" (onClose)="onRejectException()" styleClass="error-toast"
  [style]="{width:'700px'}" [modal]="true" [baseZIndex]="5000" appendTo="body">
  <ng-template let-message pTemplate="message">
    <div class="ui-fluid">
      <div class="ui-g ui-g-nopad">
        <div class="ui-g-12 alertHeader">
          <div class="ui-g-12 ui-md-1" align="center">
            <i class="pi pi-exclamation-triangle" style="font-size: 1.9em;margin:2px;"></i>
          </div>
          <div class="ui-g-12 ui-md-10" align="left">
            <h4 style="margin:5px;">Time System Error</h4>
          </div>
        </div>
        <div class="ui-g-12 ui-md-12" align="left" style="padding:0.8em;">
          <p-scrollPanel [style]="{width: '100%', height: '300px'}" *ngIf="message.data && message.data.ErrorMessage">
            <div>
              Error Message:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.ErrorMessage | sanitizeHtmlString"></label>
            </div>
            <div>
              Failed Method:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.MethodName | sanitizeHtmlString"></label>
            </div>
            <div>
              Last Exception:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.ExceptionType | sanitizeHtmlString"></label>
            </div>
            <div>
              Error Source:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.Source | sanitizeHtmlString"></label>
            </div>
            <div>
              Stack Trace:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.StackTrace | sanitizeHtmlString"></label>
            </div>
          </p-scrollPanel>
          <p-scrollPanel [style]="{width: '100%', height: '300px'}" *ngIf="message.data && message.data.InnerMessage">
            <div>
              Detailed Error Message:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.InnerMessage | sanitizeHtmlString"></label>
            </div>
            <div>
              Failed Method:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.InnerMethodName | sanitizeHtmlString"></label>
            </div>
            <div>
              Type of Exception:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.InnerExceptionType | sanitizeHtmlString"></label>
            </div>
            <div>
              Error Source:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.InnerSource | sanitizeHtmlString"></label>
            </div>
            <div>
              Detailed Stack Trace:
            </div>
            <div style="padding-left:10px;color:red;">
              <label [innerHTML]="message.data.InnerStackTrace | sanitizeHtmlString"></label>
            </div>
          </p-scrollPanel>
        </div>
      </div>
      <hr>
      <div class="ui-g ui-g-nopad">
        <div class="ui-g-4"></div>
        <div class="ui-g-4">
          <a href="{{message.data.NavigateUrl}}"> <button type="button" pButton (click)="onRejectException()"
              label="Mail to Support" class="ui-button-raised ui-button-danger" icon="pi pi-envelope"></button></a>
        </div>
        <div class="ui-g-4"></div>
      </div>
    </div>
  </ng-template>
</p-toast>

<div class="ui-g" id="header">
  <div class="ui-g-12 ui-md-12 ui-lg-12 topBar" id="sidegutter">
    <div class="ui-g-11 ui-md-9 ui-lg-10 ui-xl-10 ui-g-nopad" align="left">
      <img src="assets/images/ebixconsulting.png">
    </div>
    <!-- <div class="ui-g-4 ui-md-4 ui-lg-4 ui-xl-4" align="right">
      <div class="ui-g-12 ui-g-nopad" style="color:crimson;">
        {{fullName}}&nbsp;<b style="color:dodgerblue;">({{BuildType}})</b>
      </div>
      <div class="ui-g-12 ui-g-nopad" style="font-size:14px;color:black;">
        {{loginTime}}
      </div>
    </div> -->
    <!-- <div class="ui-g-1 ui-md-3 ui-lg-2 ui-xl-2" style="text-align: right;">
      <p-splitButton icon="fa fa-cog" [model]="settings" styleClass="ui-button-info" class="splitbuttonclass">
      </p-splitButton> &nbsp; &nbsp;
      <button pButton icon="fa fa-power-off" pTooltip="Logout" tooltipPosition="right" (click)="logout()"
        class="ui-button-raised ui-button-danger topbar-button" style="padding-right:0px"></button>
    </div> -->
    <div class="ui-g-1 ui-md-3 ui-lg-2 ui-xl-2" style="text-align: right;">
      <button pButton icon="fa fa-power-off" pTooltip="Logout" tooltipPosition="right" (click)="logout()"
        class="ui-button-raised ui-button-danger topbar-button" style="padding-right:0px"></button>
    </div>
  </div>

  <div class="ui-g-12 ui-md-12 ui-lg-12 topBar" id="minigutter">
    <div class="ui-g-1" style="padding-top:18px;font-size:20px;" align="left">
      <span class="fa fa-bars" (click)="OpenMenu()" style="cursor: pointer;"></span>
    </div>
    <div class="ui-g-9 ui-g-nopad" align="center">
      <img src="assets/images/ebixconsulting.png">
    </div>
    <div class="ui-g-2" style="padding-top:18px;" align="right">
      <button pButton icon="fa fa-power-off" pTooltip="Logout" tooltipPosition="right" (click)="logout()"
        class="ui-button-raised ui-button-danger topbar-button" style="padding-right:0px"></button>
    </div>
    <!-- <div class="ui-g-12 ui-g-nopad">
      <div class="ui-g-8" style="text-align: left;">
        <div class="ui-g-12 ui-g-nopad" style="color:crimson;">
          {{fullName}}&nbsp;<b style="color:dodgerblue;">({{BuildType}})</b>
        </div>
        <div class="ui-g-12 ui-g-nopad" style="font-size:14px;color:black;">
          {{loginTime}}
        </div>
      </div>
      <div class="ui-g-4" style="text-align: right;">
        <p-splitButton icon="fa fa-cog" [model]="settings" styleClass="ui-button-info"></p-splitButton>
      </div>
    </div> -->
  </div>


  <!-- <div class="ui-g-12 ui-md-6 ui-lg-6 ui-g-nopad userInfo" id="notifications" style="text-align: right">
    <div class="ui-g-6 ui-md-8 ui-lg-9" style="text-align:right;">
      <div class="ui-g-12 ui-md-12 ui-lg-12 ui-g-nopad" style="color:crimson;">
        {{fullName}}&nbsp;<b style="color:dodgerblue;">({{BuildType}})</b>
      </div>
      <div class="ui-g-12 ui-md-12 ui-lg-12 ui-g-nopad" style="font-size:14px;color:black;">
        {{loginTime}}
      </div>
    </div>
    <div class="ui-g-6 ui-md-4 ui-lg-3" style="text-align:right;">
      &nbsp;<button pButton icon="fa fa-key fa-2x" pTooltip="{{passwordExpiry}} Click to Change Password."
        tooltipPosition="right" (click)="changePasswordClick()"
        class="ui-button-raised {{changePasswordButtonClass}}"></button>&nbsp;
      &nbsp;<button pButton icon="fa fa-home fa-2x" pTooltip="Dashboard" tooltipPosition="right" (click)="navigateTo()"
        class="ui-button-raised"></button>&nbsp;
      <button pButton icon="fa fa-sign-out fa-2x" pTooltip="Logout" tooltipPosition="right" (click)="logout()"
        class="ui-button-raised ui-button-danger" style="padding-right:0px"></button>&nbsp;&nbsp;
    </div>
  </div> -->
</div>

<div class="ui-g ui-g-nopad" id="sideMenu" style="margin-top: 70px;margin-bottom:30px;height:-webkit-fill-available;">
  <div class="ui-g-2 ui-md-3 ui-lg-3 ui-xl-2 ui-g-nopad" id="sidegutter">
    <div id="sidenav">
      <header class="logo-env">
        <div style="width:100%;height:100%;padding:10px;box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .3);">
          <!-- logo -->
          <div class="logo">
            <div style="color:crimson;">
              {{fullName}}
            </div>
            <div style="color:black;">
              {{loginTime}}&nbsp;<b style="color:dodgerblue;">({{BuildType}})</b>
            </div>
          </div>
          <div class="settings-icon">
            <button pButton icon="fa fa-key" pTooltip="{{passwordExpiry}} Click to Change Password."
              tooltipPosition="right" (click)="changePasswordClick()" class="ui-button-raised ui-button-secondary"
              appendTo="body"></button>
            <!-- <p-splitButton icon="fa fa-cog" [model]="settings" styleClass="ui-button-raised ui-button-secondary"
              appendTo="body"></p-splitButton> -->
          </div>
        </div>
      </header>
      <p-menu #bigMenu [model]="dashboard" class="leftNav"></p-menu>
      <p-panelMenu #bigMenu2 [model]="menuItems" class="leftNav" [multiple]="false"></p-panelMenu>
    </div>
  </div>
  <div id="minigutter">
    <p-sidebar [(visible)]="visibleSidebar" [baseZIndex]="10000" [showCloseIcon]="false"
      [style]="{padding:'0px', width:'25em'}">
      <div class="heightFillAvailable" style="min-height:100px;height:auto;overflow: auto;">
        <!-- <p-scrollPanel [style]="{width: '100%', height: '200em'}"> -->
        <header class="logo-env">
          <div style="width:100%;height:100%;padding:10px;box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .3);">
            <!-- logo -->
            <div class="logo">
              <div style="color:crimson;">
                {{fullName}}
              </div>
              <div style="color:black;">
                {{loginTime}}&nbsp;<b style="color:dodgerblue;">({{BuildType}})</b>
              </div>
            </div>
            <div class="settings-icon">
              <button pButton icon="fa fa-key" pTooltip="{{passwordExpiry}} Click to Change Password."
                tooltipPosition="left" tooltipZIndex="100000" (click)="changePasswordClick()"
                class="ui-button-raised ui-button-secondary"></button>
              <!-- <p-splitButton icon="fa fa-cog" [model]="settings" styleClass="ui-button-raised ui-button-info">
                </p-splitButton> -->
            </div>
          </div>
        </header>
        <p-menu #bigMenu [model]="dashboard" class="leftNav"></p-menu>
        <p-panelMenu #smallMenu [model]="menuItems" class="leftNav" [multiple]="false"></p-panelMenu>
        <!-- </p-scrollPanel> -->
      </div>
    </p-sidebar>
  </div>

  <div id="content-body" class="ui-g-10 ui-md-9 ui-lg-9 ui-xl-10">
    <div class="ui-g-12" style="min-height: 800px;height: 100%;">
      <router-outlet *ngIf="ShowBody"></router-outlet>
    </div>
  </div>

  <!-- <app-createuser *ngIf="changeProfileDialog" [userObject]="selectedUser" (dialogEvent)="changeProfileClose($event)">
  </app-createuser>

  <app-changepassword *ngIf="changePasswordDialog" [userObject]="selectedUser"
    (dialogEvent)="changePasswordClose($event)">
  </app-changepassword> -->
  <p-dialog [(visible)]="changePasswordDialog" blockScroll="true" [width]="500" [responsive]="true" showEffect="fade"
    [modal]="true">
    <p-header>
      Change Password
      <i class="fa fa-question-circle fa-150x" pTooltip="Get Help"
        style="cursor:help; font-size: 18px; color: orange; vertical-align: middle"
        (click)="commonSvc.showHelp('HolidayUpdate.htm')"></i>
    </p-header>
    <app-changepassword></app-changepassword>
  </p-dialog>

  <button pButton label="Save" class="ui-button-raised ui-button-success" *ngIf="getHelpStatus()"></button>
  <p-sidebar [(visible)]="visibleHelp" position="right" [baseZIndex]="10000" styleClass="ui-sidebar-md sidebarHelp">
    <p-scrollPanel [style]="{width: '100%', height: '800px'}">
      <div [innerHtml]="helpText" class="helpDisplayClass"></div>
    </p-scrollPanel>
  </p-sidebar>
</div>
<div class="ui-g">
  <div class="ui-g-12" style="position:fixed;bottom: 0px;text-align: center;background: #ffff;">
    © Copyright Ebix Consulting
  </div>
</div>
<p-progressSpinner class="positionMiddle" *ngIf="showSpinner" [style]="{width: '50px', height: '50px'}" strokeWidth="4"
  fill="#EEEEEE"></p-progressSpinner>
